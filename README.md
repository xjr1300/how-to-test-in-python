# テストの考え方と実装方法 in Python

[単体テストの考え方／使い方](https://book.mynavi.jp/ec/products/detail/id=134252)

![書籍表紙](https://book.mynavi.jp/files/topics/134252_ext_06_0.jpg?v=1670578534)

- [テストの考え方と実装方法 in Python](#テストの考え方と実装方法-in-python)
  - [テストの種類](#テストの種類)
    - [単体テストの概要](#単体テストの概要)
      - [実行時間が短い](#実行時間が短い)
      - [隔離された状態で実行できる](#隔離された状態で実行できる)
    - [統合テストの概要](#統合テストの概要)
    - [E2E (End to End Test) の概要](#e2e-end-to-end-test-の概要)

## テストの種類

- 単体テスト
- 統合テスト
- E2Eテスト (End to End Test)

### 単体テストの概要

- 「単体 (unit)」と呼ばれる少量のコードを検証
- 実行時間が短い
- 隔離された状態で実行できる (他のテストと独立して実行できる)

単体テストでは、関数やクラスのメソッドなど、**1つの機能**を検証します。

また、実行時間を短くすることで、**繰り返し単体テストを実行**できるように開発者の負担を軽減します。

さらに、それぞれの単体テストが他の単体テストと独立することで、他の単体テストからの影響を受けず、個別に実行できるようになります。
これに、単体テストを**個別に実行**したり、同時に**複数の単体テストを並行／並列で実行**することができます。

#### 実行時間が短い

実行時間が長くなると、開発者がテストを実行する回数が減り、バグを見つけるまでの時間が長くなります。
バグが見つかるまでの時間が長くなると、それまでにコードベースは大きくなるため、バグの特定と修正に時間がかかるようになります。

#### 隔離された状態で実行できる

「隔離された状態で実行できる」に関する上記の記述は、「`古典学派 (デトロイト学派)`」の解釈です。

「`ロンドン学派 (モック主義者)`」は、「`テスト対象システム (System Under Test: SUT)` と`協力者オブジェクト (collaborator)` を隔離すると解釈します。
ロンドン学派は、協力者オブジェクトを積極的に`テストダブル`に置き換えます。

テストダブルとは、`モック`や`スタブ`などを示し、**協力者オブジェクトを模倣する「偽り」のオブジェクト**です。

本文書では、**古典学派の解釈を採用**しています。

### 統合テストの概要

`統合テスト`は、システム全体が意図したように機能することを検証するテストです。
システムの`ユースケース`ごとに、統合テストを実装して、それぞれまたは連続して実行します。

### E2E (End to End Test) の概要

`E2Eテスト`は、統合テストの上位に位置するテストです。
統合テストでは、システムが依存するメール送信サービスなどの外部サービスをテストダブルに置き換えますが、`E2Eテスト`では、ほぼすべての依存を実際のサービスを使用してテストします。

本文書では、`E2Eテスト`は説明の対象外とします。
